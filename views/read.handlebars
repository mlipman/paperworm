<!doctype html>

<html>
<head>
	<title>paperworm</title>	
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">


	<link href="/css/bootstrap.css" rel="stylesheet">
	<link href="/css/bootstrap-theme.css" rel="stylesheet">
	<link href="/css/paperworm.css" rel="stylesheet">
	
	<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
	  <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
	  <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
	<![endif]-->       

</head>

<body>
	<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="/index"><span class="glyphicon glyphicon-briefcase"></span> All Papers</a>
			</div>

			<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
				<a href="/summary/{{details.name}}" class="btn btn-default navbar-btn navbar-right"><span class="glyphicon glyphicon-list-alt"></span> Summary</a>
			</div>
		</div>
	</nav>
	<!-- Side bar with note/look up/highlight-->
	<ul class="nav navbar-nav navbar-right side-bar" style="z-index:10">
		<li>
			<div class="btn-group-vertical">
				<button type="button" class="btn btn-default btn-lg" id="addNoteButton" data-toggle="modal" data-target="#noteModal"><span class="glyphicon glyphicon-edit"></button>
				<button type="button" class="btn btn-default btn-lg" id="searchDict" data-toggle="modal" data-target="#defModal"><span class="glyphicon glyphicon-search"></button>
				<button type="button" class="btn btn-default btn-lg" id="addHighlightButton" data-toggle="modal" data-target="#highlightModal"><img class="icon-img" src="highlighter01.png"></button>
				<button type="button" class="btn btn-default btn-lg" id="deleteHighlightButton"><img class="icon-img" src="eraser-icon.png"></button>
			</div>
		</li>	
	</ul>

	<!-- Add Note Modal -->
	<div class="modal fade" id="noteModal" tabindex="-1" role="dialog" aria-labelledby="noteModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<form class="form-horizontal" id="addNoteForm" role="form" method="get" action="/addNote">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
						<h4 class="modal-title" id="noteModalLabel">Add Note</h4>
					</div>
					<div class="modal-body" id="noteModalBody">
                        <!--
						<div class="form-group">
							<label for="auth">Author:</label>
							<input type="text" class="form-control" id="auth" placeholder="Your name" name="auth">
						</div>
                        -->
                        <div class="form-group">
							<label for="page">Page Number:</label>
							<input type="number" class="form-control" id="pageNum" placeholder="Page number" name="pageNum">
						</div>
						<div class="form-group">
							<label for="pNum">Paragraph No:</label>
							<input type="number" class="form-control" id="pNum" placeholder="Paragraph No." name="pNum">
						</div>
					    <div class="form-group">
							<label for="bod">Note:</label>
							<textarea type="text" class="form-control" id="bod" placeholder="Type your note here..." name="bod" rows="5"></textarea>
					    </div>
				    </div>
				    <div class="modal-footer">
				    	<!--<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>-->
						<input type="submit" id="submitBtn" class="btn btn-default" value="Add"></input>
					</div>
				</form>

			</div>
		</div>
	</div>

	<!-- Definition Modal -->
	<div class="modal fade" id="defModal" tabindex="-1" role="dialog" aria-labelledby="defModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
					<h4 class="modal-title" id="defModalLabel">Definition</h4>
				</div>
				<div class="modal-body" id="defModalBody"></div>
				<div class="modal-footer">
					<button type="button" class="btn btn-primary" data-dismiss="modal">Add</button>
					<!--<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>-->
				</div>
			</div>
		</div>
	</div>

	<!-- Add Highlight Modal -->
	<div class="modal fade" id="highlightModal" tabindex="-1" role="dialog" aria-labelledby="highlightModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<form class="form-horizontal" id="addHighlightForm" role="form" method="get" action="/addHighlight">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
						<h4 class="modal-title" id="highlightModalLabel">Add Annotation</h4>
					</div>
					<div class="modal-body" id="highlightModalBody">
                        <!--
						<div class="form-group">
							<label for="auth">Author:</label>
							<input type="text" class="form-control" id="auth" placeholder="Author" name="auth">
						</div>
                        -->
						<div class="form-group">
							<label for="page">Page Number:</label>
							<input type="number" class="form-control" id="page" placeholder="Page number" name="page">
						</div>
						<div class="form-group">
							<label for="pNumHi">Paragraph Number:</label>
							<input type="number" class="form-control" id="pNumHi" placeholder="Paragraph nubmer..." name="pNumHi">
						</div>
						<div class="form-group">
							<label for="htext">Quote:</label>
							<textarea type="text" class="form-control" id="htext" placeholder="Insert the passage from the paper..." name="htext" rows="3"></textarea>
						</div>
						<div class="form-group">
							<label for="ntext">Annotation:</label>
							<textarea type="text" class="form-control" id="ntext" placeholder="Type an optional annotation here..." name="ntext" rows="3"></textarea>
						</div>
						<div class="form-group">
							<input type="hidden" class="form-control" id="sstring" name="sstring"></input>
						</div>						
				    </div>
				    <div class="modal-footer">
						<input type="submit" id="submitBtn" class="btn btn-default" value="Add"></input>
						<!--<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>-->
					</div>
				</form>
			</div>
		</div>
	</div>

	<div class="container">
		<div class="reading-pad">
			<div id="paperToRead">
				<p id="totalPages">Total Pages: {{ details.pages }}</p>
				<p id="totalParagraphs" style="display: none">{{ details.total-paragraphs }}</p>
				{{#each paragraphs}}
					<div class="row" id="pNumber{{ pNumber }}">
						<div class="col-sm-7" id="para-left">
							<div id="pageNum{{ page }}x{{ pNumber }}"></div>
							<p class="text-para" id="pageNum{{ page }}x{{ pNumber }}">[{{ pNumber }}] {{ text }}</p>
						</div>
                        <div class="col-sm-5 unselectable" id="annotation-right">
                        	{{#each images}}
                        		<div>
                        			<img src="{{ src }}" class="img-responsive">
                        			<p class="image-label">{{ label }}</p>
                        		</div>
                        	{{/each}}
                        	{{#each notes}}
                                <div class="panel panel-default">
                                    <!-- Note header -->
                                    <div class="panel-heading" id="notePanelHead">
                                        <div class="row">
                                            <!-- Title -->
                                            <div class="col-sm-7">
                                                <a data-toggle="collapse" href="#noteCont{{ pNumber }}x{{ iden }}" id="nCollapseButton"><h5 class="panel-title unselectable">{{ author }}</h5></a>
                                            </div>
                                            <!-- Buttons -->
                                            <div class="col-sm-5">
                                                <div class="btn-group pull-right">
                                                	<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown">
                                                		<span class="caret"></span>
                                                	</button>
                                                	<ul class="dropdown-menu" role="menu">
                                                    	<li><a href="#" id="edit-obj"><span class="glyphicon glyphicon-pencil"></span> Edit</a></li>
                                                    	<li class="divider"></li>
                                                    	<li><a href="#" id="remove-obj"><span class="glyphicon glyphicon-remove"></span> Remove</a></li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Note content -->
                                    <div id="noteCont{{ pNumber }}x{{ iden }}" class="collapse">
	                                    <div class="panel-body unselectable">
	                                        <p class="unselectable">{{ body }}</p>
	                                    </div>
                                	</div>
                                </div>
                        	{{/each}}
                        	{{#each highlights}}
                                <div class="panel panel-default">
                                    <!-- Note header -->
                                    <div class="panel-heading" id="hiliPanelHead">
                                        <div class="row">
                                            <!-- Title -->
                                            <div class="col-sm-7">
                                                <a data-toggle="collapse" href="#highlightCont{{ pNumber }}x{{ iden }}" id="hCollapseButton"><h6 class="panel-title unselectable">{{ author }}</h6></a>
                                            </div>
                                            <!-- Buttons -->
                                            <div class="col-sm-5">
                                                <div class="btn-group pull-right">
                                                	<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown">
                                                		<span class="caret"></span>
                                                	</button>
                                                	<ul class="dropdown-menu" role="menu">
                                                    	<li><a href="#" id="edit-obj"><span class="glyphicon glyphicon-pencil"></span> Edit</a></li>
                                                    	<li class="divider"></li>
                                                    	<li><a href="#" id="remove-obj"><span class="glyphicon glyphicon-remove"></span> Remove</a></li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Note content -->
                                    <div id="highlightCont{{ pNumber }}x{{ iden }}" class="collapse">
	                                    <div class="panel-body unselectable">
	                                        <p class="unselectable"><small>{{ hText }}</small></p>
	                                    </div>
	                                    <div class="panel-footer unselectable">
	                                		<p class="unselectable">{{ nText }}</p>
	                            		</div>
	                            	</div>
                                </div>
                        	{{/each}}

                        </div>
					</div>
				{{/each}}
			</div>

		</div>

		<!--<form id="addDefinitionForm" role="form" method="get" action="/addDefn">
			<h3>Add a definition</h3>
		    <div class="form-group">
		      <label for="auth">Author:</label>
		      <input type="text" class="form-control" id="auth" placeholder="Your name" name="auth">
		    </div>
		    <div class="form-group">
		      <label for="word">Word:</label>
		      <input type="text" class="form-control" id="word" placeholder="The word" name="word">
		    </div>
		    <div class="form-group">
		      <label for="defn">Definition:</label>
		      <input type="text" class="form-control" id="defn" placeholder="Type your definition here..." name="defn">
		    </div>
		    <input type="submit" id="submitBtn" class="btn btn-default" value="Add the definition"></input>
		</form>-->


		<!--
		<form id="addHighlightForm" role="form" method="get" action="/addHighlight">
			<h3>Add a highlight</h3>
		    <div class="form-group">
		      <label for="auth">Author:</label>
		      <input type="text" class="form-control" id="auth" placeholder="Author" name="auth">
		    </div>
		    <div class="form-group">
		      <label for="page">Page Number:</label>
		      <input type="text" class="form-control" id="page" placeholder="Page number" name="page">
		    </div>
		    <div class="form-group">
		      <label for="pNumHi">Paragraph Number:</label>
		      <input type="text" class="form-control" id="pNumHi" placeholder="Paragraph nubmer..." name="pNumHi">
		    </div>
		    <div class="form-group">
		      <label for="htext">Quote:</label>
		      <input type="text" class="form-control" id="htext" placeholder="Insert the passage from the paper..." name="htext">
		    </div>
		    <div class="form-group">
		      <label for="ntext">Annotation:</label>
		      <input type="text" class="form-control" id="ntext" placeholder="Type an optional annotation here..." name="ntext">
		    </div>

		    <input type="submit" id="submitBtn" class="btn btn-default" value="Add the highligh"></input>
		</form>-->












	</div>




	<script src="/js/jquery-1.11.0.js"></script>
	<script src="/js/bootstrap.js"></script>
	<script src="/js/paperworm.js"></script>
	<script src="/js/rangy/rangy-core.js"></script>
	<script src="/js/rangy/rangy-cssclassapplier.js"></script>
	<script src="/js/rangy/rangy-highlighter.js"></script>
	<script src="/js/rangy/rangy-selectionsaverestore.js"></script>
	<script src="/js/rangy/rangy-serializer.js"></script>
	<script src="/js/rangy/rangy-textrange.js"></script>
</body>
</html>